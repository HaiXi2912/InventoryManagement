import{d as D,r as b,o as E,p as N,q as V,a as u,c as $,b as w,j as p,n as _,e as a,w as t,f as i,u as M,h as y,k as o,t as s,v as q,E as g,_ as z}from"./index-B2xfaXjR.js";const O={class:"order-detail"},j={class:"toolbar"},I=D({__name:"OrderDetail",setup(R){const k=M(),c=b(!1),e=b(null);async function v(){c.value=!0;try{const r=k.params.id,{data:l}=await y.get(`/api/orders/${r}`);l?.success&&(e.value=l.data)}finally{c.value=!1}}async function h(){try{await q.confirm("确认已收到货物？","确认收货",{type:"warning"});const{data:r}=await y.post(`/api/orders/${e.value.id}/confirm`);r?.success&&(g.success("已确认收货"),await v())}catch(r){r?.message&&r?.message!=="cancel"&&g.error(r?.message)}}return E(v),(r,l)=>{const m=i("el-button"),d=i("el-descriptions-item"),x=i("el-descriptions"),f=i("el-card"),n=i("el-table-column"),C=i("el-table"),B=V("loading");return N((u(),$("div",O,[l[5]||(l[5]=w("h2",null,"订单详情",-1)),w("div",j,[a(m,{onClick:l[0]||(l[0]=S=>r.$router.back())},{default:t(()=>[...l[1]||(l[1]=[o("返回",-1)])]),_:1}),e.value?.status==="shipped"?(u(),p(m,{key:0,type:"success",onClick:h},{default:t(()=>[...l[2]||(l[2]=[o("确认收货",-1)])]),_:1})):_("",!0)]),e.value?(u(),p(x,{key:0,column:2,border:""},{default:t(()=>[a(d,{label:"订单号"},{default:t(()=>[o(s(e.value.order_no),1)]),_:1}),a(d,{label:"状态"},{default:t(()=>[o(s(e.value.status),1)]),_:1}),a(d,{label:"支付"},{default:t(()=>[o(s(e.value.pay_status),1)]),_:1}),a(d,{label:"金额"},{default:t(()=>[o("¥"+s(e.value.total_amount),1)]),_:1}),a(d,{label:"承运商"},{default:t(()=>[o(s(e.value.logistics_provider||"-"),1)]),_:1}),a(d,{label:"物流单号"},{default:t(()=>[o(s(e.value.tracking_no||"-"),1)]),_:1}),a(d,{label:"发货时间"},{default:t(()=>[o(s(e.value.shipped_at||"-"),1)]),_:1}),a(d,{label:"签收时间"},{default:t(()=>[o(s(e.value.delivered_at||"-"),1)]),_:1})]),_:1})):_("",!0),e.value?.address?(u(),p(f,{key:1,style:{"margin-top":"16px"},shadow:"never"},{header:t(()=>[...l[3]||(l[3]=[o("收货地址",-1)])]),default:t(()=>[o(" "+s(e.value.address.receiver_name)+" / "+s(e.value.address.phone)+" / "+s(e.value.address.province)+s(e.value.address.city)+s(e.value.address.district)+" "+s(e.value.address.detail),1)]),_:1})):_("",!0),a(f,{style:{"margin-top":"16px"},shadow:"never"},{header:t(()=>[...l[4]||(l[4]=[o("商品",-1)])]),default:t(()=>[a(C,{data:e.value?.items||[],border:"",size:"small"},{default:t(()=>[a(n,{prop:"name",label:"名称"}),a(n,{prop:"size",label:"尺码",width:"100"}),a(n,{prop:"color",label:"颜色",width:"100"}),a(n,{prop:"barcode",label:"条码",width:"160"}),a(n,{prop:"price",label:"单价",width:"120"}),a(n,{prop:"quantity",label:"数量",width:"100"}),a(n,{prop:"amount",label:"小计",width:"120"})]),_:1},8,["data"])]),_:1})])),[[B,c.value]])}}}),A=z(I,[["__scopeId","data-v-139ff322"]]);export{A as default};
