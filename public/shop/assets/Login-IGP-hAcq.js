import{d as y,z as w,r as c,c as V,a as b,e as t,w as o,f as s,k as i,h as x,E as C,u as q,i as E,_ as h}from"./index-B2xfaXjR.js";const B={class:"auth"},I=y({__name:"Login",setup(L){const r=q(),f=E(),_=w(),u=c(!1),a=c({username:"",password:""});async function v(){u.value=!0;try{const{data:l}=await x.post("/api/auth/login",a.value);if(l?.success){_.setToken(l.data.token),localStorage.setItem("token",l.data.token),C.success("登录成功");const e=typeof r.query.redirect=="string"&&r.query.redirect?r.query.redirect:"/";f.replace(e)}}finally{u.value=!1}}return(l,e)=>{const m=s("el-input"),d=s("el-form-item"),p=s("el-button"),g=s("el-form"),k=s("el-card");return b(),V("div",B,[t(k,{class:"auth-card",shadow:"never"},{header:o(()=>[...e[3]||(e[3]=[i("登录",-1)])]),default:o(()=>[t(g,{model:a.value,"label-width":"80px"},{default:o(()=>[t(d,{label:"用户名"},{default:o(()=>[t(m,{modelValue:a.value.username,"onUpdate:modelValue":e[0]||(e[0]=n=>a.value.username=n)},null,8,["modelValue"])]),_:1}),t(d,{label:"密码"},{default:o(()=>[t(m,{modelValue:a.value.password,"onUpdate:modelValue":e[1]||(e[1]=n=>a.value.password=n),type:"password"},null,8,["modelValue"])]),_:1}),t(d,null,{default:o(()=>[t(p,{type:"primary",onClick:v,loading:u.value},{default:o(()=>[...e[4]||(e[4]=[i("登录",-1)])]),_:1},8,["loading"]),t(p,{link:"",onClick:e[2]||(e[2]=n=>l.$router.push("/register"))},{default:o(()=>[...e[5]||(e[5]=[i("去注册",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})])}}}),R=h(I,[["__scopeId","data-v-3714ddf6"]]);export{R as default};
