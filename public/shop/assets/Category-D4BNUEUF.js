import{d as N,r as l,u as j,x as F,o as K,p as P,q as R,a as y,c as V,b as a,e as o,t as C,y as E,f as n,w as u,h as I,F as L,g as M,i as T,j as A,k as G,_ as H}from"./index-B2xfaXjR.js";const J={class:"category"},O={class:"header"},Q={class:"tools"},W=["src","onClick"],X={class:"product-info"},Y=["onClick"],Z={class:"product-price"},ee={class:"current-price"},te={class:"product-actions"},ae={class:"pagination-wrapper"},oe=N({__name:"Category",setup(se){const b=T(),w=j(),v=l(String(w.params.category||"")),m=l(!1),d=l(""),p=l(""),_=l(1),g=l(12),f=l([]),x=l(0);async function c(){m.value=!0;try{const s={page:_.value,limit:g.value,category:v.value};d.value&&(s.q=d.value),p.value&&(s.sort=p.value);const{data:t}=await I.get("/api/catalog",{params:s});t?.success&&(f.value=(t.data?.items||[]).map(i=>({id:i.id,name:i.name,price:i.retail_price,image:i.media?.find?.(r=>r.is_main)?.url||i.image_url||"https://via.placeholder.com/300x300?text=Product"})),x.value=t.data?.pagination?.total||f.value.length)}finally{m.value=!1}}function h(s){b.push(`/product/${s}`)}return F(()=>w.params.category,s=>{v.value=String(s||""),_.value=1,c()}),K(c),(s,t)=>{const i=n("el-input"),r=n("el-option"),z=n("el-select"),S=n("el-button"),B=n("el-card"),U=n("el-col"),$=n("el-row"),q=n("el-pagination"),D=R("loading");return P((y(),V("div",J,[a("div",O,[a("h2",null,"分类："+C(v.value),1),a("div",Q,[o(i,{modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=e=>d.value=e),placeholder:"搜索本类商品",style:{width:"240px"},onKeyup:E(c,["enter"])},null,8,["modelValue"]),o(z,{modelValue:p.value,"onUpdate:modelValue":t[1]||(t[1]=e=>p.value=e),placeholder:"排序",style:{width:"180px"},onChange:c},{default:u(()=>[o(r,{label:"默认",value:""}),o(r,{label:"价格升序",value:"price-asc"}),o(r,{label:"价格降序",value:"price-desc"})]),_:1},8,["modelValue"])])]),o($,{gutter:20},{default:u(()=>[(y(!0),V(L,null,M(f.value,e=>(y(),A(U,{key:e.id,xs:12,sm:8,md:6,lg:4},{default:u(()=>[o(B,{"body-style":{padding:"0px"},class:"product-card",shadow:"hover"},{default:u(()=>[a("img",{src:e.image,class:"product-image",onClick:k=>h(e.id)},null,8,W),a("div",X,[a("span",{class:"product-name",onClick:k=>h(e.id)},C(e.name),9,Y),a("div",Z,[a("span",ee,"¥"+C(e.price),1)]),a("div",te,[o(S,{size:"small",type:"primary",onClick:k=>h(e.id)},{default:u(()=>[...t[4]||(t[4]=[G("查看详情",-1)])]),_:1},8,["onClick"])])])]),_:2},1024)]),_:2},1024))),128))]),_:1}),a("div",ae,[o(q,{"current-page":_.value,"onUpdate:currentPage":t[2]||(t[2]=e=>_.value=e),"page-size":g.value,"onUpdate:pageSize":t[3]||(t[3]=e=>g.value=e),total:x.value,"page-sizes":[12,24,48,96],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:c,onCurrentChange:c},null,8,["current-page","page-size","total"])])])),[[D,m.value]])}}}),ne=H(oe,[["__scopeId","data-v-a8242738"]]);export{ne as default};
