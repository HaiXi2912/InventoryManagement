
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
import{d as k,a1 as re,V as E,a2 as he,r as A,U as me,C as Q,F as g,o as d,w as b,X as B,j as t,aU as ve,a8 as X,Y as N,aV as ge,af as D,ag as L,aW as ye,aX as xe,aY as Ce,aZ as Ie,a_ as ke,a$ as Me,B as H,x as ie,c as $,f as S,b0 as Be,$ as Pe,M as z,m as j,a7 as Y,a9 as Z,ai as we,aO as Se,D as W,N as ee,h as ue,_ as de,t as V,b1 as ce,k as fe,l as pe,at as K,s as $e,b2 as qe,aC as J,aA as ae,R as Te,a as O,I as se,az as Re,aB as Oe,n as De,G as Le,g as Fe,H as Ee,p as ze}from"./index-BOHDOdY5.js";import{_ as We}from"./index.vue_vue_type_script_setup_true_lang-CwC8EQWF.js";import{u as ne}from"./index-dBRrOUR8.js";import{u as Ae}from"./useMainPage-CsqLTB4M.js";const[_e,Ne]=me("ContextMenuRoot");var Ve=k({inheritAttrs:!1,__name:"ContextMenuRoot",props:{pressOpenDelay:{type:Number,required:!1,default:700},dir:{type:String,required:!1},modal:{type:Boolean,required:!1,default:!0}},emits:["update:open"],setup(l,{emit:n}){const e=l,s=n,{dir:o,modal:u,pressOpenDelay:r}=re(e);E();const m=he(o),p=A(!1),h=A();return Ne({open:p,onOpenChange:C=>{p.value=C},dir:m,modal:u,triggerElement:h,pressOpenDelay:r}),Q(p,C=>{s("update:open",C)}),(C,x)=>(d(),g(t(ve),{open:p.value,"onUpdate:open":x[0]||(x[0]=i=>p.value=i),dir:t(m),modal:t(u)},{default:b(()=>[B(C.$slots,"default")]),_:3},8,["open","dir","modal"]))}}),Ge=Ve,Ue=k({__name:"ContextMenuContent",props:{forceMount:{type:Boolean,required:!1},loop:{type:Boolean,required:!1},sideFlip:{type:Boolean,required:!1},alignOffset:{type:Number,required:!1,default:0},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1,default:!0},collisionBoundary:{type:null,required:!1,default:()=>[]},collisionPadding:{type:[Number,Object],required:!1,default:0},sticky:{type:String,required:!1,default:"partial"},hideWhenDetached:{type:Boolean,required:!1,default:!1},positionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","closeAutoFocus"],setup(l,{emit:n}){const o=X(l,n);E();const u=_e(),r=A(!1);return(m,p)=>(d(),g(t(ge),N(t(o),{side:"right","side-offset":2,align:"start","update-position-strategy":"always",style:{"--reka-context-menu-content-transform-origin":"var(--reka-popper-transform-origin)","--reka-context-menu-content-available-width":"var(--reka-popper-available-width)","--reka-context-menu-content-available-height":"var(--reka-popper-available-height)","--reka-context-menu-trigger-width":"var(--reka-popper-anchor-width)","--reka-context-menu-trigger-height":"var(--reka-popper-anchor-height)"},onCloseAutoFocus:p[0]||(p[0]=h=>{!h.defaultPrevented&&r.value&&h.preventDefault(),r.value=!1}),onInteractOutside:p[1]||(p[1]=h=>{h.detail.originalEvent.button===2&&h.target===t(u).triggerElement.value&&h.preventDefault(),!h.defaultPrevented&&!t(u).modal.value&&(r.value=!0)})}),{default:b(()=>[B(m.$slots,"default")]),_:3},16))}}),je=Ue,He=k({__name:"ContextMenuGroup",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(l){const n=l;return E(),(e,s)=>(d(),g(t(ye),D(L(n)),{default:b(()=>[B(e.$slots,"default")]),_:3},16))}}),Ke=He,Xe=k({__name:"ContextMenuItem",props:{disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["select"],setup(l,{emit:n}){const e=l,o=xe(n);return E(),(u,r)=>(d(),g(t(Ce),D(L({...e,...t(o)})),{default:b(()=>[B(u.$slots,"default")]),_:3},16))}}),Ye=Xe,Ze=k({__name:"ContextMenuLabel",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(l){const n=l;return E(),(e,s)=>(d(),g(t(Ie),D(L(n)),{default:b(()=>[B(e.$slots,"default")]),_:3},16))}}),Je=Ze,Qe=k({__name:"ContextMenuPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(l){const n=l;return(e,s)=>(d(),g(t(ke),D(L(n)),{default:b(()=>[B(e.$slots,"default")]),_:3},16))}}),et=Qe,tt=k({__name:"ContextMenuSeparator",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(l){const n=l;return E(),(e,s)=>(d(),g(t(Me),D(L(n)),{default:b(()=>[B(e.$slots,"default")]),_:3},16))}}),at=tt;function oe(l){return l.pointerType!=="mouse"}var st=k({inheritAttrs:!1,__name:"ContextMenuTrigger",props:{disabled:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(l){const n=l,{disabled:e}=re(n),{forwardRef:s,currentElement:o}=E(),u=_e(),r=A({x:0,y:0}),m=H(()=>({getBoundingClientRect:()=>({width:0,height:0,left:r.value.x,right:r.value.x,top:r.value.y,bottom:r.value.y,...r.value})})),p=A(0);function h(){window.clearTimeout(p.value)}function C(a){r.value={x:a.clientX,y:a.clientY},u.onOpenChange(!0)}async function x(a){e.value||(await j(),a.defaultPrevented||(h(),C(a),a.preventDefault()))}async function i(a){e.value||(await j(),oe(a)&&!a.defaultPrevented&&(h(),p.value=window.setTimeout(()=>C(a),u.pressOpenDelay.value)))}async function c(a){e.value||(await j(),oe(a)&&!a.defaultPrevented&&h())}return ie(()=>{o.value&&(u.triggerElement.value=o.value)}),(a,P)=>(d(),$(z,null,[S(t(Be),{as:"template",reference:m.value},null,8,["reference"]),S(t(Pe),N({ref:t(s),as:a.as,"as-child":a.asChild,"data-state":t(u).open.value?"open":"closed","data-disabled":t(e)?"":void 0,style:{WebkitTouchCallout:"none",pointerEvents:"auto"}},a.$attrs,{onContextmenu:x,onPointerdown:i,onPointermove:c,onPointercancel:c,onPointerup:c}),{default:b(()=>[B(a.$slots,"default")]),_:3},16,["as","as-child","data-state","data-disabled"])],64))}}),nt=st;const ot=k({__name:"ContextMenu",props:{pressOpenDelay:{},dir:{},modal:{type:Boolean}},emits:["update:open"],setup(l,{emit:n}){const o=X(l,n);return(u,r)=>(d(),g(t(Ge),D(L(t(o))),{default:b(()=>[B(u.$slots,"default")]),_:3},16))}}),lt=k({__name:"ContextMenuContent",props:{forceMount:{type:Boolean},loop:{type:Boolean},sideFlip:{type:Boolean},alignOffset:{},alignFlip:{type:Boolean},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","closeAutoFocus"],setup(l,{emit:n}){const e=l,s=n,o=Y(e,"class"),u=X(o,s);return(r,m)=>(d(),g(t(et),null,{default:b(()=>[S(t(je),N(t(u),{class:t(Z)("z-50 min-w-32 overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e.class)}),{default:b(()=>[B(r.$slots,"default")]),_:3},16,["class"])]),_:3}))}}),rt=k({__name:"ContextMenuGroup",props:{asChild:{type:Boolean},as:{}},setup(l){const n=l;return(e,s)=>(d(),g(t(Ke),D(L(n)),{default:b(()=>[B(e.$slots,"default")]),_:3},16))}}),it=k({__name:"ContextMenuItem",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{},class:{},inset:{type:Boolean}},emits:["select"],setup(l,{emit:n}){const e=l,s=n,o=Y(e,"class"),u=X(o,s);return(r,m)=>(d(),g(t(Ye),N(t(u),{class:t(Z)("relative flex cursor-default select-none items-center rounded-sm gap-2 px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r.inset&&"pl-8",e.class)}),{default:b(()=>[B(r.$slots,"default")]),_:3},16,["class"]))}}),ut=k({__name:"ContextMenuLabel",props:{asChild:{type:Boolean},as:{},class:{},inset:{type:Boolean}},setup(l){const n=l,e=Y(n,"class");return(s,o)=>(d(),g(t(Je),N(t(e),{class:t(Z)("px-2 py-1.5 text-sm font-semibold text-foreground",s.inset&&"pl-8",n.class)}),{default:b(()=>[B(s.$slots,"default")]),_:3},16,["class"]))}}),le=k({__name:"ContextMenuSeparator",props:{asChild:{type:Boolean},as:{},class:{}},setup(l){const n=l,e=Y(n,"class");return(s,o)=>(d(),g(t(at),N(t(e),{class:t(Z)("-mx-1 my-1 h-px bg-border",n.class)}),null,16,["class"]))}}),dt=k({__name:"ContextMenuTrigger",props:{disabled:{type:Boolean},asChild:{type:Boolean},as:{}},setup(l){const e=we(l);return(s,o)=>(d(),g(t(nt),D(L(t(e))),{default:b(()=>[B(s.$slots,"default")]),_:3},16))}}),ct={key:0,class:"size-4 flex-center"},ft=k({name:"FaContextMenu",__name:"index",props:{items:{}},setup(l){const n=l,e=Se(),s=H(()=>n.items.map(r=>r.filter(m=>!m.hide)).filter(r=>r.length)),o=H(()=>s.value.some(r=>r.some(m=>m.icon)));function u(r){var m;(m=r.handle)==null||m.call(r)}return(r,m)=>{const p=de;return d(),g(t(ot),{modal:!1},{default:b(()=>[S(t(dt),{"as-child":""},{default:b(()=>[B(r.$slots,"default")]),_:3}),S(t(lt),{class:"z-2050"},{default:b(()=>[e.label?(d(),$(z,{key:0},[S(t(ut),null,{default:b(()=>[B(r.$slots,"label")]),_:3}),S(t(le))],64)):W("",!0),(d(!0),$(z,null,ee(t(s),(h,C)=>(d(),$(z,{key:C},[S(t(rt),null,{default:b(()=>[(d(!0),$(z,null,ee(h,(x,i)=>(d(),g(t(it),{key:i,disabled:x.disabled,class:"cursor-pointer",onClick:c=>u(x)},{default:b(()=>[t(o)?(d(),$("div",ct,[x.icon?(d(),g(p,{key:0,name:x.icon,class:"size-4"},null,8,["name"])):W("",!0)])):W("",!0),ue(" "+V(x.label),1)]),_:2},1032,["disabled","onClick"]))),128))]),_:2},1024),C!==t(s).length-1?(d(),g(t(le),{key:0})):W("",!0)],64))),128))]),_:3})]),_:3})}}});function pt(){const l=fe(),n=pe(),e=ce();function s(){return l.path}function o(i=s()){if(p(i,!1)){const c=s();if(i===c){const a=e.list.findIndex(P=>P.tabId===i);a>0?n.close(e.list[a-1].fullPath):n.close(e.list[a+1].fullPath)}else e.remove(i)}}function u(i=s()){const c=s();if(i!==c){const a=e.list.findIndex(P=>P.tabId===i);n.push(e.list[a].fullPath)}e.removeOtherSide(i)}function r(i=s()){const c=s();if(i!==c){const a=e.list.findIndex(v=>v.tabId===i);e.list.findIndex(v=>v.tabId===c)<a&&n.push(e.list[a].fullPath)}e.removeLeftSide(i)}function m(i=s()){const c=s();if(i!==c){const a=e.list.findIndex(v=>v.tabId===i);e.list.findIndex(v=>v.tabId===c)>a&&n.push(e.list[a].fullPath)}e.removeRightSide(i)}function p(i=s(),c=!0){let a=!0;return e.list.findIndex(v=>v.tabId===i)<0?(a=!1,!c&&K.warning("关闭的标签页不存在",{position:"top-center"})):e.list.length<=1&&(a=!1,!c&&K.warning("当前只有一个标签页，不可关闭",{position:"top-center"})),a}function h(i=s()){return e.list.some(c=>c.tabId!==i)}function C(i=s()){var a;let c=!0;if(i===((a=e.list[0])==null?void 0:a.tabId))c=!1;else{const P=e.list.findIndex(v=>v.tabId===i);c=e.list.some((v,_)=>_<P&&v.tabId!==i)}return c}function x(i=s()){var a;let c=!0;if(i===((a=e.list.at(-1))==null?void 0:a.tabId))c=!1;else{const P=e.list.findIndex(v=>v.tabId===i);c=e.list.some((v,_)=>_>=P&&v.tabId!==i)}return c}return{getId:s,close,closeById:o,closeOtherSide:u,closeLeftSide:r,closeRightSide:m,checkClose:p,checkCloseOtherSide:h,checkCloseLeftSide:C,checkCloseRightSide:x}}const _t={class:"tabbar"},bt={class:"tabbar-container"},ht=["data-index","onClick"],mt={class:"size-full"},vt={class:"tab-content"},gt=["onClick"],yt={class:"text-sm"},xt={class:"text-accent-foreground/50"},Ct=k({name:"Tabbar",__name:"index",setup(l){const n=fe(),e=pe(),s=$e(),o=ce(),u=pt(),r=Ae(),m=qe({reactive:!0}),p=H(()=>u.getId()),h=J("tabsRef"),C=J("tabContainerRef"),x=J("tabRef");Q(()=>n,_=>{s.settings.tabbar.enable&&(o.add(_),j(()=>{var M,I,w,F;const y=o.list.findIndex(f=>f.tabId===p.value);if(y!==-1){const f=(M=x.value)==null?void 0:M.find(T=>Number.parseInt(T.dataset.index)===y),q=(w=(I=h.value)==null?void 0:I.ref)==null?void 0:w.$el;if(f&&q){const T=f.offsetLeft,G=f.offsetWidth,R=q.clientWidth,U=T-(R-G)/2;(F=h.value)==null||F.scrollTo(U)}i()}}))},{immediate:!0,deep:!0});function i(){var _,y,M,I;if(((_=C.value)==null?void 0:_.$el.clientWidth)>((I=(M=(y=h.value)==null?void 0:y.ref)==null?void 0:M.$el.clientWidth)!=null?I:0)&&localStorage.getItem("tabbarScrollTip")===void 0){localStorage.setItem("tabbarScrollTip","");const w=K.info("温馨提示",{description:"标签栏数量超过展示区域范围，可以将鼠标移到标签栏上，通过鼠标滚轮滑动浏览",position:"top-center",duration:1/0,action:{label:"知道了",onClick:()=>K.dismiss(w)}})}}function c(_){return[[{label:"重新加载",icon:"i-ri:refresh-line",disabled:_.tabId!==p.value,handle:()=>r.reload()},{label:"关闭标签页",icon:"i-ri:close-line",disabled:o.list.length<=1,handle:()=>u.closeById(_.tabId)}],[{label:"关闭其他标签页",icon:"i-mdi:close",disabled:!u.checkCloseOtherSide(_.tabId),handle:()=>u.closeOtherSide(_.tabId)},{label:"关闭左侧标签页",icon:"i-mdi:arrow-expand-left",disabled:!u.checkCloseLeftSide(_.tabId),handle:()=>u.closeLeftSide(_.tabId)},{label:"关闭右侧标签页",icon:"i-mdi:arrow-expand-right",disabled:!u.checkCloseRightSide(_.tabId),handle:()=>u.closeRightSide(_.tabId)}]]}const a=A([]);function P(){var M,I,w,F,f,q,T,G;const _=(w=(I=(M=h.value)==null?void 0:M.ref)==null?void 0:I.$el.clientWidth)!=null?w:0,y=(G=(T=(q=(f=(F=h.value)==null?void 0:F.ref)==null?void 0:f.el)==null?void 0:q.viewportElement)==null?void 0:T.scrollLeft)!=null?G:0;if(a.value=[],x.value)for(let R=0;R<x.value.length;R++){const U=x.value[R],te=U.offsetLeft,be=te+U.offsetWidth;te<y+_&&be>y&&R>=0&&R<o.list.length&&a.value.push(R)}}function v(_){var y;return(y=a.value.findIndex(M=>M===_))!=null?y:-1}return Q(()=>m.alt,_=>{_&&P()}),ie(()=>{ae("alt+left,alt+right,alt+w,alt+1,alt+2,alt+3,alt+4,alt+5,alt+6,alt+7,alt+8,alt+9,alt+0",(_,y)=>{var M;if(s.settings.tabbar.enable&&s.settings.tabbar.enableHotkeys)switch(_.preventDefault(),y.key){case"alt+left":if(o.list[0].tabId!==p.value){const I=o.list.findIndex(w=>w.tabId===p.value);e.push(o.list[I-1].fullPath)}break;case"alt+right":if(((M=o.list.at(-1))==null?void 0:M.tabId)!==p.value){const I=o.list.findIndex(w=>w.tabId===p.value);e.push(o.list[I+1].fullPath)}break;case"alt+w":u.closeById(p.value);break;case"alt+1":case"alt+2":case"alt+3":case"alt+4":case"alt+5":case"alt+6":case"alt+7":case"alt+8":case"alt+9":{const I=Number(y.key.split("+")[1]);a.value[I-1]!==void 0&&e.push(o.list[a.value[I-1]].fullPath);break}case"alt+0":e.push(o.list[o.list.length-1].fullPath);break}})}),Te(()=>{ae.unbind("alt+left,alt+right,alt+w,alt+1,alt+2,alt+3,alt+4,alt+5,alt+6,alt+7,alt+8,alt+9,alt+0")}),(_,y)=>{const M=de,I=We,w=ft,F=Re;return d(),$("div",_t,[(d(),g(se(t(ne)("tabbar-start")))),O("div",bt,[S(F,{ref_key:"tabsRef",ref:h,scrollbar:!1,mask:"",horizontal:"","gradient-color":"var(--g-tabbar-bg)",class:"tabs"},{default:b(()=>[S(Oe,{ref_key:"tabContainerRef",ref:C,name:"tabbar",tag:"div",class:"tab-container"},{default:b(()=>[(d(!0),$(z,null,ee(t(o).list,(f,q)=>(d(),$("div",{key:f.tabId,ref_for:!0,ref_key:"tabRef",ref:x,"data-index":q,class:De(["tab",{actived:f.tabId===t(p)}]),onClick:T=>t(e).push(f.fullPath)},[S(w,{items:c(f)},{default:b(()=>[O("div",mt,[y[0]||(y[0]=O("div",{class:"tab-dividers"},null,-1)),y[1]||(y[1]=O("div",{class:"tab-background"},null,-1)),S(I,{delay:1e3,side:"bottom"},{content:b(()=>[O("div",yt,V(typeof(f==null?void 0:f.title)=="function"?f.title():f.title),1),O("div",xt,V(f.fullPath),1)]),default:b(()=>[O("div",vt,[(d(),$("div",{key:f.tabId,class:"title"},[t(s).settings.tabbar.enableIcon&&f.icon?(d(),g(M,{key:0,name:f.icon,class:"icon"},null,8,["name"])):W("",!0),ue(" "+V(typeof(f==null?void 0:f.title)=="function"?f.title():f.title),1)])),t(o).list.length>1?(d(),$("div",{key:0,class:"action-icon",onClick:Fe(T=>t(u).closeById(f.tabId),["stop"])},[S(M,{name:"i-ri:close-fill"})],8,gt)):W("",!0),Le(O("div",{class:"hotkey-number"},V(v(q)+1),513),[[Ee,t(m).alt&&v(q)>=0&&v(q)<9]])])]),_:2},1024)])]),_:2},1032,["items"])],10,ht))),128))]),_:1},512)]),_:1},512)]),(d(),g(se(t(ne)("tabbar-end"))))])}}}),Pt=ze(Ct,[["__scopeId","data-v-b204226d"]]);export{Pt as default};
