
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
import{d as h,c,o as w,a as l,u as Z,r as z,b as E,e as G,f as a,t as _,n as L,w as s,g as P,h as i,i as b,_ as J,j as v,k as K,E as V,l as O,m as Q,p as W,q as H}from"./index-BOHDOdY5.js";/*! Element Plus Icons Vue v2.3.2 */var X=h({name:"Lock",__name:"lock",setup(F){return(x,y)=>(w(),c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[l("path",{fill:"currentColor",d:"M224 448a32 32 0 0 0-32 32v384a32 32 0 0 0 32 32h576a32 32 0 0 0 32-32V480a32 32 0 0 0-32-32zm0-64h576a96 96 0 0 1 96 96v384a96 96 0 0 1-96 96H224a96 96 0 0 1-96-96V480a96 96 0 0 1 96-96"}),l("path",{fill:"currentColor",d:"M512 544a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V576a32 32 0 0 1 32-32m192-160v-64a192 192 0 1 0-384 0v64zM512 64a256 256 0 0 1 256 256v128H256V320A256 256 0 0 1 512 64"})]))}}),U=X,Y=h({name:"Message",__name:"message",setup(F){return(x,y)=>(w(),c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[l("path",{fill:"currentColor",d:"M128 224v512a64 64 0 0 0 64 64h640a64 64 0 0 0 64-64V224zm0-64h768a64 64 0 0 1 64 64v512a128 128 0 0 1-128 128H192A128 128 0 0 1 64 736V224a64 64 0 0 1 64-64"}),l("path",{fill:"currentColor",d:"M904 224 656.512 506.88a192 192 0 0 1-289.024 0L120 224zm-698.944 0 210.56 240.704a128 128 0 0 0 192.704 0L818.944 224z"})]))}}),ee=Y,ae=h({name:"UserFilled",__name:"user-filled",setup(F){return(x,y)=>(w(),c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[l("path",{fill:"currentColor",d:"M288 320a224 224 0 1 0 448 0 224 224 0 1 0-448 0m544 608H160a32 32 0 0 1-32-32v-96a160 160 0 0 1 160-160h448a160 160 0 0 1 160 160v96a32 32 0 0 1-32 32z"})]))}}),N=ae;const se={class:"login-container"},re={class:"login-content"},le={class:"login-card"},oe={class:"login-header"},te={class:"logo"},ne={class:"form-tabs"},ie={key:0,class:"form-container"},de={class:"form-options"},ue={class:"quick-login"},me={class:"quick-btns nowrap"},pe={key:1,class:"form-container"},fe={class:"login-footer"},A=h({__name:"login",setup(F){const x=O(),y=K(),q=Z(),k=z(),C=z(),d=z(!0),o=E({username:"admin",password:"123456",remember:!1}),t=E({username:"",email:"",password:"",confirmPassword:"",agree:!1}),f=z(!1),I={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"用户名长度为3-20个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"密码长度为6-20个字符",trigger:"blur"}]},T={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"用户名长度为3-20个字符",trigger:"blur"},{pattern:/^[a-zA-Z0-9_]+$/,message:"用户名只能包含字母、数字和下划线",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"密码长度为6-20个字符",trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:(n,e,u)=>{e!==t.password?u(new Error("两次输入密码不一致")):u()},trigger:"blur"}],agree:[{validator:(n,e,u)=>{e?u():u(new Error("请同意用户协议"))},trigger:"change"}]},j=()=>{var n,e;d.value=!d.value,d.value?(n=C.value)==null||n.resetFields():(e=k.value)==null||e.resetFields()},R=async()=>{k.value&&await k.value.validate(async n=>{if(n){f.value=!0;try{await q.login({account:o.username,password:o.password});const u=(q.role||localStorage.getItem("role"))==="agent"?"/cs/workbench":y.query.redirect||"/";V.success("登录成功，正在跳转..."),x.replace(u)}catch(e){V.error("登录失败，请检查用户名和密码")}finally{f.value=!1}}})},S=async()=>{C.value&&await C.value.validate(async n=>{if(n){f.value=!0;try{await q.register({username:t.username,email:t.email,password:t.password}),V.success("注册成功！请登录"),d.value=!0,await Q(),o.username=t.username}catch(e){V.error((e==null?void 0:e.message)||"注册失败，请稍后重试")}finally{f.value=!1}}})},M=n=>{n==="admin"?(o.username="admin",o.password="123456"):n==="manager"?(o.username="manager",o.password="123456"):n==="agent"&&(o.username="agent1",o.password="123456")},D=()=>{V.info("请联系系统管理员重置密码")};return(n,e)=>{const u=J,g=b("el-input"),m=b("el-form-item"),$=b("el-checkbox"),p=b("el-button"),B=b("el-form");return w(),c("div",se,[e[24]||(e[24]=G('<div class="login-background" data-v-793d969f><div class="bg-shapes" data-v-793d969f><div class="shape shape-1" data-v-793d969f></div><div class="shape shape-2" data-v-793d969f></div><div class="shape shape-3" data-v-793d969f></div></div></div>',1)),l("div",re,[l("div",le,[l("div",oe,[l("div",te,[a(u,{name:"i-ep:shop",size:"40",color:"#409EFF"})]),e[13]||(e[13]=l("h1",null,"进销存管理系统",-1)),l("p",null,_(d.value?"欢迎回来":"创建新账户"),1)]),l("div",ne,[l("button",{class:L(["tab-btn",{active:d.value}]),onClick:e[0]||(e[0]=r=>d.value=!0)}," 登录 ",2),l("button",{class:L(["tab-btn",{active:!d.value}]),onClick:e[1]||(e[1]=r=>d.value=!1)}," 注册 ",2)]),d.value?(w(),c("div",ie,[a(B,{ref_key:"loginFormRef",ref:k,model:o,rules:I,size:"large",onSubmit:P(R,["prevent"])},{default:s(()=>[a(m,{prop:"username"},{default:s(()=>[a(g,{modelValue:o.username,"onUpdate:modelValue":e[2]||(e[2]=r=>o.username=r),placeholder:"请输入用户名","prefix-icon":v(N),clearable:""},null,8,["modelValue","prefix-icon"])]),_:1}),a(m,{prop:"password"},{default:s(()=>[a(g,{modelValue:o.password,"onUpdate:modelValue":e[3]||(e[3]=r=>o.password=r),type:"password",placeholder:"请输入密码","prefix-icon":v(U),"show-password":"",clearable:""},null,8,["modelValue","prefix-icon"])]),_:1}),a(m,null,{default:s(()=>[l("div",de,[a($,{modelValue:o.remember,"onUpdate:modelValue":e[4]||(e[4]=r=>o.remember=r)},{default:s(()=>[...e[14]||(e[14]=[i("记住我",-1)])]),_:1},8,["modelValue"]),a(p,{type:"primary",link:"",onClick:D},{default:s(()=>[...e[15]||(e[15]=[i(" 忘记密码？ ",-1)])]),_:1})])]),_:1}),a(m,null,{default:s(()=>[a(p,{type:"primary",size:"large",style:{width:"100%"},loading:f.value,onClick:R},{default:s(()=>[a(u,{name:"i-ep:user"}),i(" "+_(f.value?"登录中...":"登录"),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),l("div",ue,[e[19]||(e[19]=l("p",null,"快速登录：",-1)),l("div",me,[a(p,{size:"small",onClick:e[5]||(e[5]=r=>M("agent"))},{default:s(()=>[...e[16]||(e[16]=[i("客服",-1)])]),_:1}),a(p,{size:"small",onClick:e[6]||(e[6]=r=>M("admin"))},{default:s(()=>[...e[17]||(e[17]=[i("管理员",-1)])]),_:1}),a(p,{size:"small",onClick:e[7]||(e[7]=r=>M("manager"))},{default:s(()=>[...e[18]||(e[18]=[i("店长",-1)])]),_:1})])])])):(w(),c("div",pe,[a(B,{ref_key:"registerFormRef",ref:C,model:t,rules:T,size:"large",onSubmit:P(S,["prevent"])},{default:s(()=>[a(m,{prop:"username"},{default:s(()=>[a(g,{modelValue:t.username,"onUpdate:modelValue":e[8]||(e[8]=r=>t.username=r),placeholder:"请输入用户名","prefix-icon":v(N),clearable:""},null,8,["modelValue","prefix-icon"])]),_:1}),a(m,{prop:"email"},{default:s(()=>[a(g,{modelValue:t.email,"onUpdate:modelValue":e[9]||(e[9]=r=>t.email=r),placeholder:"请输入邮箱地址","prefix-icon":v(ee),clearable:""},null,8,["modelValue","prefix-icon"])]),_:1}),a(m,{prop:"password"},{default:s(()=>[a(g,{modelValue:t.password,"onUpdate:modelValue":e[10]||(e[10]=r=>t.password=r),type:"password",placeholder:"请输入密码","prefix-icon":v(U),"show-password":"",clearable:""},null,8,["modelValue","prefix-icon"])]),_:1}),a(m,{prop:"confirmPassword"},{default:s(()=>[a(g,{modelValue:t.confirmPassword,"onUpdate:modelValue":e[11]||(e[11]=r=>t.confirmPassword=r),type:"password",placeholder:"请确认密码","prefix-icon":v(U),"show-password":"",clearable:""},null,8,["modelValue","prefix-icon"])]),_:1}),a(m,{prop:"agree"},{default:s(()=>[a($,{modelValue:t.agree,"onUpdate:modelValue":e[12]||(e[12]=r=>t.agree=r)},{default:s(()=>[e[22]||(e[22]=i(" 我已阅读并同意 ",-1)),a(p,{type:"primary",link:""},{default:s(()=>[...e[20]||(e[20]=[i("《用户协议》",-1)])]),_:1}),e[23]||(e[23]=i(" 和 ",-1)),a(p,{type:"primary",link:""},{default:s(()=>[...e[21]||(e[21]=[i("《隐私政策》",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(m,null,{default:s(()=>[a(p,{type:"primary",size:"large",style:{width:"100%"},loading:f.value,onClick:S},{default:s(()=>[a(u,{name:"i-ep:user-plus"}),i(" "+_(f.value?"注册中...":"注册账户"),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])),l("div",fe,[l("p",null,[i(_(d.value?"还没有账户？":"已有账户？")+" ",1),a(p,{type:"primary",link:"",onClick:j},{default:s(()=>[i(_(d.value?"立即注册":"立即登录"),1)]),_:1})])])])])])}}});typeof H=="function"&&H(A);const ve=W(A,[["__scopeId","data-v-793d969f"]]);export{ve as default};
