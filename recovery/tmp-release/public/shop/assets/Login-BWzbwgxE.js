import{d as w,z as V,r as p,c as y,a as b,e as t,w as o,f as s,k as d,h as x,E as C,u as E,i as S,_ as h}from"./index-DaL8kBdz.js";const B={class:"auth"},I=w({__name:"Login",setup(L){const f=E(),_=S(),c=V(),u=p(!1),a=p({username:"",password:""});async function v(){u.value=!0;try{const{data:l}=await x.post("/api/auth/login",a.value);if(l?.success){c.setToken(l.data.token),localStorage.setItem("token",l.data.token),C.success("登录成功");const e=String(f.query.redirect||"/");_.replace(e)}}finally{u.value=!1}}return(l,e)=>{const m=s("el-input"),r=s("el-form-item"),i=s("el-button"),g=s("el-form"),k=s("el-card");return b(),y("div",B,[t(k,{class:"auth-card",shadow:"never"},{header:o(()=>[...e[3]||(e[3]=[d("登录",-1)])]),default:o(()=>[t(g,{model:a.value,"label-width":"80px"},{default:o(()=>[t(r,{label:"用户名"},{default:o(()=>[t(m,{modelValue:a.value.username,"onUpdate:modelValue":e[0]||(e[0]=n=>a.value.username=n)},null,8,["modelValue"])]),_:1}),t(r,{label:"密码"},{default:o(()=>[t(m,{modelValue:a.value.password,"onUpdate:modelValue":e[1]||(e[1]=n=>a.value.password=n),type:"password"},null,8,["modelValue"])]),_:1}),t(r,null,{default:o(()=>[t(i,{type:"primary",onClick:v,loading:u.value},{default:o(()=>[...e[4]||(e[4]=[d("登录",-1)])]),_:1},8,["loading"]),t(i,{link:"",onClick:e[2]||(e[2]=n=>l.$router.push("/register"))},{default:o(()=>[...e[5]||(e[5]=[d("去注册",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})])}}}),R=h(I,[["__scopeId","data-v-f5f732aa"]]);export{R as default};
